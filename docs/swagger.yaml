basePath: /
definitions:
  domain.Booking:
    properties:
      booking_date:
        type: string
      created_at:
        type: string
      end_time:
        type: string
      guests_count:
        type: integer
      id:
        type: string
      restaurant:
        $ref: '#/definitions/domain.Restaurant'
      restaurant_id:
        type: string
      special_note:
        type: string
      start_time:
        type: string
      status:
        $ref: '#/definitions/domain.BookingStatus'
      table:
        $ref: '#/definitions/domain.Table'
      table_id:
        type: string
      updated_at:
        type: string
      user:
        $ref: '#/definitions/domain.User'
      user_id:
        type: string
    type: object
  domain.BookingStatus:
    enum:
    - pending
    - confirmed
    - cancelled
    - completed
    - no_show
    type: string
    x-enum-varnames:
    - BookingStatusPending
    - BookingStatusConfirmed
    - BookingStatusCancelled
    - BookingStatusCompleted
    - BookingStatusNoShow
  domain.CuisineType:
    enum:
    - Italian
    - Chinese
    - Mexican
    - Japanese
    - Indian
    - French
    - Kazakh
    - Turkish
    - Thai
    - American
    - Korean
    - Cafe
    - Bar
    - Fast Food
    - Vegetarian
    - Other
    type: string
    x-enum-varnames:
    - CuisineTypeItalian
    - CuisineTypeChinese
    - CuisineTypeMexican
    - CuisineTypeJapanese
    - CuisineTypeIndian
    - CuisineTypeFrench
    - CuisineTypeKazakh
    - CuisineTypeTurkish
    - CuisineTypeThai
    - CuisineTypeAmerican
    - CuisineTypeKorean
    - CuisineTypeCafe
    - CuisineTypeBar
    - CuisineTypeFastFood
    - CuisineTypeVegetarian
    - CuisineTypeOther
  domain.DaySchedule:
    properties:
      close_time:
        type: string
      is_closed:
        type: boolean
      open_time:
        type: string
    type: object
  domain.LocationType:
    enum:
    - window
    - vip
    - regular
    - outdoor
    type: string
    x-enum-varnames:
    - LocationWindow
    - LocationVIP
    - LocationRegular
    - LocationOutdoor
  domain.Payment:
    properties:
      amount:
        type: integer
      booking:
        $ref: '#/definitions/domain.Booking'
      booking_id:
        type: string
      created_at:
        type: string
      error_message:
        type: string
      external_payment_id:
        type: string
      external_payment_url:
        type: string
      id:
        type: string
      payment_method:
        $ref: '#/definitions/domain.PaymentMethod'
      payment_status:
        $ref: '#/definitions/domain.PaymentStatus'
      updated_at:
        type: string
      user:
        $ref: '#/definitions/domain.User'
      user_id:
        type: string
    type: object
  domain.PaymentMethod:
    enum:
    - wallet
    - halyk
    - kaspi
    type: string
    x-enum-varnames:
    - PaymentMethodWallet
    - PaymentMethodHalyk
    - PaymentMethodKaspi
  domain.PaymentStatus:
    enum:
    - pending
    - completed
    - failed
    - refunded
    type: string
    x-enum-varnames:
    - PaymentStatusPending
    - PaymentStatusCompleted
    - PaymentStatusFailed
    - PaymentStatusRefunded
  domain.Restaurant:
    properties:
      address:
        type: string
      average_price:
        type: integer
      bookings:
        items:
          $ref: '#/definitions/domain.Booking'
        type: array
      created_at:
        type: string
      cuisine_type:
        $ref: '#/definitions/domain.CuisineType'
      description:
        type: string
      id:
        type: string
      images:
        items:
          $ref: '#/definitions/domain.RestaurantImage'
        type: array
      instagram:
        type: string
      is_active:
        type: boolean
      latitude:
        type: number
      longitude:
        type: number
      managers:
        items:
          $ref: '#/definitions/domain.RestaurantManager'
        type: array
      max_combinable_tables:
        type: integer
      name:
        type: string
      owner:
        $ref: '#/definitions/domain.User'
      owner_id:
        type: string
      phone:
        type: string
      rating:
        type: number
      reviews:
        items:
          $ref: '#/definitions/domain.Review'
        type: array
      reviews_count:
        type: integer
      tables:
        items:
          $ref: '#/definitions/domain.Table'
        type: array
      updated_at:
        type: string
      website:
        type: string
      working_hours:
        $ref: '#/definitions/domain.WorkingHours'
    type: object
  domain.RestaurantImage:
    properties:
      cloudinary_public_id:
        type: string
      cloudinary_url:
        type: string
      created_at:
        type: string
      id:
        type: string
      is_main:
        type: boolean
      restaurant_id:
        type: string
    type: object
  domain.RestaurantManager:
    properties:
      assigned_at:
        type: string
      id:
        type: string
      restaurant:
        $ref: '#/definitions/domain.Restaurant'
      restaurant_id:
        type: string
      user:
        $ref: '#/definitions/domain.User'
      user_id:
        type: string
    type: object
  domain.Review:
    properties:
      booking:
        $ref: '#/definitions/domain.Booking'
      booking_id:
        type: string
      comment:
        type: string
      created_at:
        type: string
      id:
        type: string
      is_visible:
        type: boolean
      rating:
        type: integer
      restaurant:
        $ref: '#/definitions/domain.Restaurant'
      restaurant_id:
        type: string
      updated_at:
        type: string
      user:
        $ref: '#/definitions/domain.User'
      user_id:
        type: string
    type: object
  domain.Table:
    properties:
      bookings:
        items:
          $ref: '#/definitions/domain.Booking'
        type: array
      created_at:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      location_type:
        $ref: '#/definitions/domain.LocationType'
      max_capacity:
        type: integer
      min_capacity:
        type: integer
      restaurant:
        $ref: '#/definitions/domain.Restaurant'
      restaurant_id:
        type: string
      table_number:
        type: string
      updated_at:
        type: string
      x_position:
        type: integer
      y_position:
        type: integer
    type: object
  domain.TransactionType:
    enum:
    - deposit
    - withdraw
    - booking_charge
    - refund
    - payment_to_restaurant
    type: string
    x-enum-varnames:
    - TransactionDeposit
    - TransactionWithdraw
    - TransactionBookingCharge
    - TransactionRefund
    - TransactionPaymentToRestaurant
  domain.User:
    properties:
      avatar:
        type: string
      bookings:
        items:
          $ref: '#/definitions/domain.Booking'
        type: array
      created_at:
        type: string
      email:
        type: string
      first_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_login_at:
        type: string
      last_name:
        type: string
      managed_restaurants:
        items:
          $ref: '#/definitions/domain.RestaurantManager'
        type: array
      owned_restaurants:
        items:
          $ref: '#/definitions/domain.Restaurant'
        type: array
      phone:
        type: string
      reviews:
        items:
          $ref: '#/definitions/domain.Review'
        type: array
      role:
        $ref: '#/definitions/domain.UserRole'
      updated_at:
        type: string
    type: object
  domain.UserRole:
    enum:
    - customer
    - owner
    - manager
    - admin
    type: string
    x-enum-varnames:
    - UserRoleCustomer
    - UserRoleOwner
    - UserRoleManager
    - UserRoleAdmin
  domain.Wallet:
    properties:
      balance:
        type: integer
      created_at:
        type: string
      id:
        type: string
      transactions:
        items:
          $ref: '#/definitions/domain.WalletTransaction'
        type: array
      updated_at:
        type: string
      user:
        $ref: '#/definitions/domain.User'
      user_id:
        type: string
    type: object
  domain.WalletTransaction:
    properties:
      amount:
        type: integer
      booking:
        $ref: '#/definitions/domain.Booking'
      booking_id:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      type:
        $ref: '#/definitions/domain.TransactionType'
      wallet:
        $ref: '#/definitions/domain.Wallet'
      wallet_id:
        type: string
    type: object
  domain.WorkingHours:
    additionalProperties:
      $ref: '#/definitions/domain.DaySchedule'
    type: object
  handler.AddManagerRequest:
    properties:
      user_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
    required:
    - user_id
    type: object
  handler.AvailabilityResponse:
    properties:
      available:
        type: boolean
      end_time:
        type: string
      start_time:
        type: string
      table_id:
        type: string
    type: object
  handler.CreateBookingRequest:
    properties:
      booking_date:
        type: string
      end_time:
        type: string
      guests_count:
        minimum: 1
        type: integer
      restaurant_id:
        type: string
      special_note:
        type: string
      start_time:
        type: string
      table_id:
        type: string
      user_id:
        type: string
    required:
    - booking_date
    - end_time
    - guests_count
    - restaurant_id
    - start_time
    - table_id
    - user_id
    type: object
  handler.CreatePaymentRequest:
    properties:
      amount:
        minimum: 1
        type: integer
      booking_id:
        type: string
      user_id:
        type: string
    required:
    - amount
    - user_id
    type: object
  handler.CreateRestaurantRequest:
    properties:
      address:
        type: string
      average_price:
        type: integer
      cuisine_type:
        $ref: '#/definitions/domain.CuisineType'
      description:
        type: string
      instagram:
        type: string
      latitude:
        type: number
      longitude:
        type: number
      max_combinable_tables:
        type: integer
      name:
        type: string
      owner_id:
        type: string
      phone:
        type: string
      website:
        type: string
      working_hours:
        $ref: '#/definitions/domain.WorkingHours'
    required:
    - address
    - average_price
    - cuisine_type
    - max_combinable_tables
    - name
    - owner_id
    - phone
    - working_hours
    type: object
  handler.CreateReviewRequest:
    properties:
      booking_id:
        type: string
      comment:
        type: string
      rating:
        maximum: 5
        minimum: 1
        type: integer
      restaurant_id:
        type: string
      user_id:
        type: string
    required:
    - rating
    - restaurant_id
    - user_id
    type: object
  handler.CreateTableRequest:
    properties:
      location_type:
        $ref: '#/definitions/domain.LocationType'
      max_capacity:
        minimum: 1
        type: integer
      min_capacity:
        minimum: 1
        type: integer
      restaurant_id:
        type: string
      table_number:
        type: string
      x_position:
        type: integer
      y_position:
        type: integer
    required:
    - location_type
    - max_capacity
    - min_capacity
    - restaurant_id
    - table_number
    type: object
  handler.CreateUserRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      password:
        minLength: 6
        type: string
      phone:
        type: string
      role:
        $ref: '#/definitions/domain.UserRole'
    required:
    - email
    - first_name
    - last_name
    - password
    - phone
    - role
    type: object
  handler.DepositRequest:
    properties:
      amount:
        minimum: 1
        type: integer
      description:
        type: string
      user_id:
        type: string
    required:
    - amount
    - user_id
    type: object
  handler.ErrorResponse:
    properties:
      error:
        example: invalid request
        type: string
    type: object
  handler.PaymentWithURLResponse:
    properties:
      external_payment_url:
        type: string
      payment:
        $ref: '#/definitions/domain.Payment'
    type: object
  handler.SuccessResponse:
    properties:
      message:
        example: operation successful
        type: string
    type: object
  handler.UpdateBookingStatusRequest:
    properties:
      status:
        $ref: '#/definitions/domain.BookingStatus'
    required:
    - status
    type: object
  handler.UpdateRestaurantRequest:
    properties:
      address:
        type: string
      description:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      phone:
        type: string
    type: object
  handler.UpdateReviewRequest:
    properties:
      comment:
        type: string
      rating:
        maximum: 5
        minimum: 1
        type: integer
    type: object
  handler.UpdateTableRequest:
    properties:
      is_active:
        type: boolean
      location_type:
        $ref: '#/definitions/domain.LocationType'
      x_position:
        type: integer
      y_position:
        type: integer
    type: object
  handler.WebhookRequest:
    properties:
      external_payment_id:
        type: string
      status:
        type: string
    required:
    - external_payment_id
    - status
    type: object
  handler.WithdrawRequest:
    properties:
      amount:
        minimum: 1
        type: integer
      description:
        type: string
      user_id:
        type: string
    required:
    - amount
    - user_id
    type: object
host: localhost:8080
info:
  contact: {}
  description: API для системы бронирования столиков в ресторанах
  title: Restaurant Booking API
  version: "1.0"
paths:
  /api/bookings:
    post:
      consumes:
      - application/json
      description: Создать новое бронирование столика в ресторане
      parameters:
      - description: Данные бронирования
        in: body
        name: booking
        required: true
        schema:
          $ref: '#/definitions/handler.CreateBookingRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.Booking'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "409":
          description: Столик недоступен
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать бронирование
      tags:
      - bookings
  /api/bookings/{id}:
    get:
      consumes:
      - application/json
      description: Получить информацию о бронировании по ID
      parameters:
      - description: Booking ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Booking'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить бронирование
      tags:
      - bookings
  /api/bookings/{id}/cancel:
    put:
      consumes:
      - application/json
      description: Отменить бронирование (установить статус cancelled)
      parameters:
      - description: Booking ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Booking'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Отменить бронирование
      tags:
      - bookings
  /api/bookings/{id}/status:
    put:
      consumes:
      - application/json
      description: Обновить статус бронирования (pending, confirmed, cancelled, completed,
        no_show)
      parameters:
      - description: Booking ID
        in: path
        name: id
        required: true
        type: string
      - description: Новый статус
        in: body
        name: status
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBookingStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Booking'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Обновить статус бронирования
      tags:
      - bookings
  /api/bookings/check-availability:
    get:
      consumes:
      - application/json
      description: Проверить, доступен ли столик для бронирования на указанное время
      parameters:
      - description: Table ID
        in: query
        name: table_id
        required: true
        type: string
      - description: Время начала (RFC3339 format)
        in: query
        name: start_time
        required: true
        type: string
      - description: Время окончания (RFC3339 format)
        in: query
        name: end_time
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.AvailabilityResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Проверить доступность столика
      tags:
      - bookings
  /api/payments:
    get:
      consumes:
      - application/json
      description: Получить историю платежей пользователя
      parameters:
      - description: User ID
        in: query
        name: user_id
        required: true
        type: string
      - default: 10
        description: Limit
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Payment'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить платежи пользователя
      tags:
      - payments
  /api/payments/{id}/refund:
    post:
      consumes:
      - application/json
      description: Вернуть средства за платеж
      parameters:
      - description: Payment ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Вернуть платеж
      tags:
      - payments
  /api/payments/halyk:
    post:
      consumes:
      - application/json
      description: Создать платеж через Halyk Bank
      parameters:
      - description: Данные платежа
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreatePaymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.PaymentWithURLResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать платеж через Halyk
      tags:
      - payments
  /api/payments/kaspi:
    post:
      consumes:
      - application/json
      description: Создать платеж через Kaspi
      parameters:
      - description: Данные платежа
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreatePaymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.PaymentWithURLResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать платеж через Kaspi
      tags:
      - payments
  /api/payments/wallet:
    post:
      consumes:
      - application/json
      description: Создать и обработать платеж через кошелек
      parameters:
      - description: Данные платежа
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreatePaymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Payment'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать платеж через кошелек
      tags:
      - payments
  /api/payments/webhook/halyk:
    post:
      consumes:
      - application/json
      description: Обработка callback от Halyk Bank
      parameters:
      - description: Webhook данные
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.WebhookRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.SuccessResponse'
      summary: Webhook для Halyk Bank
      tags:
      - payments
  /api/payments/webhook/kaspi:
    post:
      consumes:
      - application/json
      description: Обработка callback от Kaspi
      parameters:
      - description: Webhook данные
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.WebhookRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.SuccessResponse'
      summary: Webhook для Kaspi
      tags:
      - payments
  /api/restaurants:
    get:
      consumes:
      - application/json
      description: Получить список всех ресторанов с пагинацией
      parameters:
      - default: 10
        description: Количество записей
        in: query
        name: limit
        type: integer
      - default: 0
        description: Смещение
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Restaurant'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Список ресторанов
      tags:
      - restaurants
    post:
      consumes:
      - application/json
      description: Создать новый ресторан
      parameters:
      - description: Данные ресторана
        in: body
        name: restaurant
        required: true
        schema:
          $ref: '#/definitions/handler.CreateRestaurantRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.Restaurant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать ресторан
      tags:
      - restaurants
  /api/restaurants/{id}:
    delete:
      consumes:
      - application/json
      description: Удалить ресторан по ID (устанавливает is_active = false)
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Удалить ресторан (soft delete)
      tags:
      - restaurants
    get:
      consumes:
      - application/json
      description: Получить информацию о ресторане по ID
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Restaurant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить ресторан
      tags:
      - restaurants
    put:
      consumes:
      - application/json
      description: Обновить информацию о ресторане
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      - description: Данные для обновления
        in: body
        name: restaurant
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateRestaurantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Restaurant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Обновить ресторан
      tags:
      - restaurants
  /api/restaurants/{id}/bookings:
    get:
      consumes:
      - application/json
      description: Получить все бронирования ресторана на определенную дату
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Дата в формате YYYY-MM-DD
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Booking'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить бронирования ресторана
      tags:
      - bookings
  /api/restaurants/{id}/images:
    post:
      consumes:
      - multipart/form-data
      description: Загрузить изображение для ресторана (mock upload)
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      - description: Файл изображения
        in: formData
        name: image
        required: true
        type: file
      - default: false
        description: Является ли главным изображением
        in: formData
        name: is_main
        type: boolean
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.RestaurantImage'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Добавить изображение к ресторану
      tags:
      - restaurants
  /api/restaurants/{id}/images/{image_id}:
    delete:
      consumes:
      - application/json
      description: Удалить изображение ресторана по ID
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Image ID
        in: path
        name: image_id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Удалить изображение ресторана
      tags:
      - restaurants
  /api/restaurants/{id}/managers:
    get:
      consumes:
      - application/json
      description: Получить всех менеджеров ресторана
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.RestaurantManager'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить список менеджеров ресторана
      tags:
      - managers
    post:
      consumes:
      - application/json
      description: Добавить пользователя в качестве менеджера ресторана (только владелец)
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      - description: Данные менеджера
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.AddManagerRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.RestaurantManager'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Добавить менеджера к ресторану
      tags:
      - managers
  /api/restaurants/{id}/managers/{user_id}:
    delete:
      consumes:
      - application/json
      description: Удалить менеджера из ресторана (только владелец)
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      - description: Owner ID
        in: query
        name: owner_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Удалить менеджера из ресторана
      tags:
      - managers
  /api/restaurants/{id}/reviews:
    get:
      consumes:
      - application/json
      description: Получить все отзывы определенного ресторана с пагинацией
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      - default: 10
        description: Количество записей
        in: query
        name: limit
        type: integer
      - default: 0
        description: Смещение
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Review'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить отзывы ресторана
      tags:
      - reviews
  /api/restaurants/{id}/tables:
    get:
      consumes:
      - application/json
      description: Получить все столы определенного ресторана
      parameters:
      - description: Restaurant ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Table'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить столы ресторана
      tags:
      - tables
  /api/reviews:
    post:
      consumes:
      - application/json
      description: Создать новый отзыв о ресторане
      parameters:
      - description: Данные отзыва
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/handler.CreateReviewRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.Review'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать отзыв
      tags:
      - reviews
  /api/reviews/{id}:
    delete:
      consumes:
      - application/json
      description: Удалить отзыв по ID
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Удалить отзыв
      tags:
      - reviews
    get:
      consumes:
      - application/json
      description: Получить информацию об отзыве по ID
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Review'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить отзыв
      tags:
      - reviews
    put:
      consumes:
      - application/json
      description: Обновить информацию об отзыве
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: string
      - description: Данные для обновления
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Review'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Обновить отзыв
      tags:
      - reviews
  /api/tables:
    post:
      consumes:
      - application/json
      description: Создать новый стол в ресторане
      parameters:
      - description: Данные стола
        in: body
        name: table
        required: true
        schema:
          $ref: '#/definitions/handler.CreateTableRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.Table'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать стол
      tags:
      - tables
  /api/tables/{id}:
    delete:
      consumes:
      - application/json
      description: Удалить стол по ID
      parameters:
      - description: Table ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Удалить стол
      tags:
      - tables
    get:
      consumes:
      - application/json
      description: Получить информацию о столе по ID
      parameters:
      - description: Table ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Table'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить стол
      tags:
      - tables
    put:
      consumes:
      - application/json
      description: Обновить информацию о столе
      parameters:
      - description: Table ID
        in: path
        name: id
        required: true
        type: string
      - description: Данные для обновления
        in: body
        name: table
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateTableRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Table'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Обновить стол
      tags:
      - tables
  /api/tables/available:
    get:
      consumes:
      - application/json
      description: Получить доступные столы ресторана по минимальной вместимости
      parameters:
      - description: Restaurant ID
        in: query
        name: restaurant_id
        required: true
        type: string
      - default: 1
        description: Минимальная вместимость
        in: query
        name: min_capacity
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Table'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить доступные столы
      tags:
      - tables
  /api/users:
    post:
      consumes:
      - application/json
      description: Регистрация нового пользователя
      parameters:
      - description: Данные пользователя
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/handler.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Создать пользователя
      tags:
      - users
  /api/users/{id}:
    get:
      consumes:
      - application/json
      description: Получить информацию о пользователе по ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить пользователя
      tags:
      - users
  /api/users/{user_id}/bookings:
    get:
      consumes:
      - application/json
      description: Получить все бронирования определенного пользователя
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Booking'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить бронирования пользователя
      tags:
      - bookings
  /api/users/{user_id}/reviews:
    get:
      consumes:
      - application/json
      description: Получить все отзывы определенного пользователя
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Review'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить отзывы пользователя
      tags:
      - reviews
  /api/wallet:
    get:
      consumes:
      - application/json
      description: Получить информацию о кошельке пользователя
      parameters:
      - description: User ID
        in: query
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Wallet'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить кошелек
      tags:
      - wallet
  /api/wallet/deposit:
    post:
      consumes:
      - application/json
      description: Пополнить баланс кошелька пользователя
      parameters:
      - description: Данные для пополнения
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.DepositRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Wallet'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Пополнить кошелек
      tags:
      - wallet
  /api/wallet/transactions:
    get:
      consumes:
      - application/json
      description: Получить историю транзакций кошелька
      parameters:
      - description: User ID
        in: query
        name: user_id
        required: true
        type: string
      - default: 10
        description: Limit
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.WalletTransaction'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Получить историю транзакций
      tags:
      - wallet
  /api/wallet/withdraw:
    post:
      consumes:
      - application/json
      description: Вывести средства из кошелька пользователя
      parameters:
      - description: Данные для вывода
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.WithdrawRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.Wallet'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Вывести средства из кошелька
      tags:
      - wallet
schemes:
- http
swagger: "2.0"
